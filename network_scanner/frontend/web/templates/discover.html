{% extends "base.html" %}
{% block title %}Discover Devices - Network Scanner{% endblock %}
{% block page_title %}Discover Devices{% endblock %}

{% block styles %}
<!-- Add page-specific CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/discover.css') }}">
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Scan Settings</h5>
            </div>
            <div class="card-body">
                <form id="discover-form">
                    <div class="mb-3">
                        <label for="target" class="form-label">Target</label>
                        <input type="text" class="form-control" id="target" name="target" placeholder="IP, range, or CIDR (e.g., 192.168.1.0/24)" required>
                        <div class="form-text">Specify an IP address, range, or CIDR notation.</div>
                    </div>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="passive" name="passive">
                        <label class="form-check-label" for="passive">Passive Mode</label>
                        <div class="form-text">Use only passive discovery methods.</div>
                    </div>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="stealth" name="stealth">
                        <label class="form-check-label" for="stealth">Stealth Mode</label>
                        <div class="form-text">Slower but less detectable.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="timeout" class="form-label">Timeout (seconds)</label>
                        <input type="number" class="form-control" id="timeout" name="timeout" value="5.0" min="0.1" step="0.1">
                        <div class="form-text">Timeout for network operations in seconds.</div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="scan-button">
                        <i class="bi bi-search"></i> Start Scan
                    </button>
                </form>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="card-title mb-0">Network Detection</h5>
            </div>
            <div class="card-body">
                <div id="network-info">
                    <p>Detecting your network...</p>
                </div>
                <button type="button" class="btn btn-outline-secondary btn-sm" id="detect-network">
                    <i class="bi bi-arrow-repeat"></i> Detect Network
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-md-8 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Scan Results</h5>
            </div>
            <div class="card-body">
                <div id="scan-status" class="alert alert-info d-none">
                    <div class="d-flex align-items-center">
                        <div class="spinner-border spinner-border-sm me-2" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <div>Scanning... Please wait.</div>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="results-table">
                        <thead>
                            <tr>
                                <th>IP Address</th>
                                <th>Status</th>
                                <th>Method</th>
                                <th>Timestamp</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="5" class="text-center">No scan results yet. Start a scan to discover devices.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Include utility functions -->
<script src="{{ url_for('static', filename='js/discover/utils.js') }}"></script>

<!-- Include network detection functionality -->
<script src="{{ url_for('static', filename='js/discover/network-detection.js') }}"></script>

<!-- Include results display functionality -->
<script src="{{ url_for('static', filename='js/discover/results-display.js') }}"></script>

<!-- Include scan polling functionality -->
<script src="{{ url_for('static', filename='js/discover/scan-polling.js') }}"></script>

<!-- Include main page script -->
<script src="{{ url_for('static', filename='js/discover/main.js') }}"></script>
{% endblock %}
